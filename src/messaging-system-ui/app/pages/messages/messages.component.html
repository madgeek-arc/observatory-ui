<div class="uk-section-default uk-container uk-container-large uk-padding"  style="min-height: calc(100svh - var(--header-height))">
  <h3>Messages</h3>

  <div class="uk-flex uk-flex-right">
    <button class="uk-button uk-button-secondary uk-flex uk-flex-middle" uk-toggle="target: #emailCompose">
      <span class="material-icons md-18 uk-margin-small-right">edit</span>New Message
    </button>
  </div>

  <ul uk-tab>
    <li class="uk-active" (click)="refreshInbox()"><a href="#"><span class="material-icons md-18">inbox</span>Inbox</a></li>
    <li (click)="refreshOutbox()"><a href="#"><span class="material-icons md-18">send</span>Sent</a></li>
  </ul>

  <div class="uk-padding-small uk-padding-remove-horizontal uk-flex uk-flex-right">
    <div class="uk-inline">
      <span class="uk-form-icon" uk-icon="icon: search"></span>
      <a class="uk-form-icon uk-form-icon-flip" uk-icon="icon: close; ratio: 0.6"></a>
      <input type="text" class="uk-input uk-form-width-medium" placeholder="Search..." name="keyword">
    </div>
  </div>

  <ul class="uk-switcher">
    <li *ngIf="inbox" class="uk-animation-fade">
      <table class="uk-table uk-table-divider uk-table-hover uk-table-middle uk-background-default uk-border-rounded">
        <thead>
        <tr>
          <th><input class="uk-checkbox" type="checkbox"></th>
          <th>
            <a class="uk-flex uk-flex-middle" (click)="refreshInbox()">
              <span class="material-icons">refresh</span>Refresh
            </a>
          </th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let topic of inbox">
          <td class="uk-width-auto">
            <input class="uk-checkbox" type="checkbox" aria-label="Checkbox" (change)="toggleCheck($event, topic)"
                   [checked]="topicIsSelected(topic) > 0">
          </td>
          <td class="uk-width-1-6" [routerLink]="[topic.id]" [fragment]="'message' + (topic.messages.length-1)" style="cursor: pointer">
            <div [ngClass]="{'uk-text-bolder': !topic.messages[topic.messages.length-1].read}">
              {{topic.from.name}}
            </div>
            <div class="uk-text-muted">{{topic.updated | date}}</div>
          </td>
          <td class="uk-text-truncate uk-width-2-3" [routerLink]="[topic.id]" [fragment]="'message' + (topic.messages.length-1)" style="cursor: pointer">
            <div [ngClass]="{'uk-text-bolder': !topic.messages[topic.messages.length-1].read}">
              {{topic.subject}}
            </div>
            <div>
              <div class="uk-text-muted" [innerHtml]="topic.messages[topic.messages.length-1].body">
              </div>
            </div>
          </td>
          <td class="uk-width-1-6 uk-text-right">
            <span *ngFor="let tag of topic.tags; let i=index" [ngClass]="{'uk-margin-small-left': i!==0}">
              <span class="uk-badge">{{tag}}</span>
            </span>
          </td>
        </tr>
        </tbody>
      </table>
    </li>

    <li *ngIf="sent" class="uk-animation-fade">
      <table class="uk-table uk-table-divider uk-table-hover uk-table-middle uk-background-default uk-border-rounded">
        <thead>
        <tr>
          <th><input class="uk-checkbox" type="checkbox"></th>
          <th>
            <a class="uk-flex uk-flex-middle" (click)="refreshOutbox()">
              <span class="material-icons">refresh</span>Refresh
            </a>
          </th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let topic of sent">
          <td class="uk-width-auto">
            <input class="uk-checkbox" type="checkbox" aria-label="Checkbox" (change)="toggleCheck($event, topic)"
                   [checked]="topicIsSelected(topic) > 0">
          </td>
          <td class="uk-width-1-6" [routerLink]="[topic.id]" [fragment]="'message' + (topic.messages.length-1)" style="cursor: pointer">
            <div [ngClass]="{'uk-text-bolder': !topic.messages[topic.messages.length-1].read}">
              {{topic.from.name}}
            </div>
            <div class="uk-text-muted">{{topic.updated | date}}</div>
          </td>
          <td class="uk-text-truncate uk-width-2-3" [routerLink]="[topic.id]" [fragment]="'message' + (topic.messages.length-1)" style="cursor: pointer">
            <div [ngClass]="{'uk-text-bolder': !topic.messages[topic.messages.length-1].read}">
              {{topic.subject}}
            </div>
            <div>
              <div class="uk-text-muted" [innerHtml]="topic.messages[topic.messages.length-1].body">
              </div>
            </div>
          </td>
          <td class="uk-width-1-6 uk-text-right">
            <span *ngFor="let tag of topic.tags; let i=index" [ngClass]="{'uk-margin-small-left': i!==0}">
              <span class="uk-badge">{{tag}}</span>
            </span>
          </td>
        </tr>
        </tbody>
      </table>
    </li>

  </ul>

</div>

<app-email-compose id="emailCompose" class="uk-modal-container" uk-modal></app-email-compose>
