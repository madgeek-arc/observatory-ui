<div class="uk-section uk-section-small" #exportContent>
  <div class="uk-container uk-container-expand">

    <ul class="uk-breadcrumb">
      <li><a [routerLink]="['/explore/open-science-by-area']">Open Science by Area</a></li>
      <li><span aria-current="page">Data Management</span></li>
    </ul>

    <div class="uk-flex uk-flex-between uk-flex-middle">
      <h4>Open Science by Area</h4>
      <div class="uk-flex uk-flex-center" (click)="exportToPDF([exportContent, exportContent1, exportContent2, exportContent3], 'Data Management')" style="cursor: pointer">
        <div class="uk-flex uk-flex-middle uk-text-primary" style="background-color: #DAEEF3; border-radius: 30px; padding: 5px 7px">
        <span class="" style="background-color: #fff; border-radius: 50px; border: 1px solid #008691; padding: 4px 10px">
          Export report
        </span>
          <span *ngIf="exportActive else elseBlock" class="uk-margin-small-left" uk-spinner="ratio: 0.7"></span>
          <ng-template #elseBlock>
            <span class="material-symbols-outlined filled uk-margin-small-left uk-text-primary">download</span>
          </ng-template>
        </div>
      </div>
    </div>

    <h5>Data Management</h5>
    <p>FAIR data principles refer to guidelines that ensure data are Findable, Accessible, Interoperable, and Reusable. These principles aim to enhance the utility and availability of data generated by scientific research, promoting more efficient discovery and analysis by both humans and machines. The FAIR principles advocate for robust metadata and data standards, easy discoverability through persistent identifiers, accessible data under well-defined conditions, interoperable formats that allow integration with other datasets, and clear usage licenses to maximize data reuse.</p>

  </div>
</div>

<div class="uk-section uk-section-small" #exportContent1>
  <div class="uk-container uk-container-expand">
    <h5>General Overview of Data Management in Europe for 2022</h5>

    <div class="uk-child-width-1-3 uk-grid-match uk-grid-row-medium uk-flex-center" uk-grid>

      <div *ngIf="countriesWithPlans.length === 2">
        <div class="uk-card card-simple uk-card-small uk-card-body">
          <div>
            <p>Number of <strong>published Data Management Plans</strong> in EU Countries</p>
          </div>
          <div class="">
            <span class="uk-text-bold"><span class="number big">{{ countriesWithPlans[1] }}</span> DMP </span>
          </div>
          <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
            <ng-container *ngIf="countriesWithPlans[1] >= countriesWithPlans[0]; else policyDown">
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined up-arrow-color" >arrow_upward</span>
                <span class="percentage-up-color">{{ calculatePercentageChange(countriesWithPlans) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50" width="99">
              </div>
            </ng-container>
            <ng-template #policyDown>
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                <span class="percentage-down-color">{{ calculatePercentageChange(countriesWithPlans) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50" width="99">
              </div>
            </ng-template>
          </div>
        </div>
      </div>

      <div *ngIf="countriesWithPolicy.length === 2">
        <div class="uk-card card-simple uk-card-small uk-card-body">
          <div>
            <p>Percentage of <strong>EU Countries with Policy on Data Management</strong></p>
          </div>
          <div class="number big">
            <span class="uk-text-bold">{{ countriesWithPolicy[1] }}%</span>
          </div>
          <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
            <ng-container *ngIf="countriesWithPolicy[1] >= countriesWithPolicy[0]; else policyDown">
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined up-arrow-color" >arrow_upward</span>
                <span class="percentage-up-color">{{ Math.abs(countriesWithPolicy[0] - countriesWithPolicy[1]) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50" width="99">
              </div>
            </ng-container>
            <ng-template #policyDown>
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                <span class="percentage-down-color">{{ Math.abs(countriesWithPolicy[0] - countriesWithPolicy[1]) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50" width="99">
              </div>
            </ng-template>
          </div>
        </div>
      </div>

      <div *ngIf="totalInvestments.length === 2">
        <div class="uk-card card-simple uk-card-small uk-card-body">
          <div>
            <p>Total amount of <strong>financial investments</strong> in Data Management</p>
          </div>
          <div class="number big">
            <span class="uk-text-bold">{{ totalInvestments[1] }} mil Euro</span>
          </div>
          <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
            <ng-container *ngIf="totalInvestments[1] >= totalInvestments[0]; else policyDown">
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined up-arrow-color" >arrow_upward</span>
                <span class="percentage-up-color">{{ calculatePercentageChange(totalInvestments) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50" width="99">
              </div>
            </ng-container>
            <ng-template #policyDown>
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                <span class="percentage-down-color">{{ calculatePercentageChange(totalInvestments) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50" width="99">
              </div>
            </ng-template>
          </div>
        </div>
      </div>

      <div *ngIf="countriesWithStrategy.length === 2">
        <div class="uk-card card-simple uk-card-small uk-card-body">
          <div>
            <p>Percentage of <strong>EU Countries with Financial Strategy on Data Management</strong></p>
          </div>
          <div class="number big">
            <span class="uk-text-bold">{{ countriesWithStrategy[1] }}%</span>
          </div>
          <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
            <ng-container *ngIf="countriesWithStrategy[1] >= countriesWithStrategy[0]; else policyDown">
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined up-arrow-color" >arrow_upward</span>
                <span class="percentage-up-color">{{ Math.abs(countriesWithStrategy[0] - countriesWithStrategy[1]) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50" width="99">
              </div>
            </ng-container>
            <ng-template #policyDown>
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                <span class="percentage-down-color">{{ Math.abs(countriesWithStrategy[0] - countriesWithStrategy[1]) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50" width="99">
              </div>
            </ng-template>
          </div>
        </div>
      </div>

      <div *ngIf="countriesWithMonitoring.length === 2">
        <div class="uk-card card-simple uk-card-small uk-card-body">
          <div>
            <p>Percentage of EU Countries with National Data Management <strong>Monitoring Initiatives</strong></p>
          </div>
          <div class="number big">
            <span class="uk-text-bold">{{ countriesWithMonitoring[1] }}%</span>
          </div>
          <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
            <ng-container *ngIf="countriesWithMonitoring[1] >= countriesWithMonitoring[0]; else policyDown">
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined up-arrow-color" >arrow_upward</span>
                <span class="percentage-up-color">{{ Math.abs(countriesWithMonitoring[0] - countriesWithMonitoring[1]) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50" width="99">
              </div>
            </ng-container>
            <ng-template #policyDown>
              <div class="uk-flex uk-flex-middle">
                <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                <span class="percentage-down-color">{{ Math.abs(countriesWithMonitoring[0] - countriesWithMonitoring[1]) }}%</span>&nbsp; vs last year
              </div>
              <div>
                <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50" width="99">
              </div>
            </ng-template>
          </div>
        </div>
      </div>

    </div>

    <div class="uk-flex uk-flex-center uk-margin-top">
      <span class="uk-text-bold">Data source:</span>&nbsp; Survey on National Contributions to EOSC and Open Science.
    </div>

  </div>
</div>

<div class="uk-section uk-section-small uk-margin-top" #exportContent2>
  <div class="uk-container uk-container-expand">

    <div class="uk-child-width-1-2 uk-grid-match" uk-grid>
      <div style="height: 600px">
        <app-highcharts-category-map
          [mapData]="questionsDataArray[0]" [subtitle]="" [toolTipData]="toolTipData[0]"
          [title]="'National Policy on Data Management'" [backgroundColor]="'#ffffff'"
          [customLabelText]="'<strong>'+participatingCountries[0] + ' out of '+ total[0] + '</strong><br> countries have a <br>national policy on open<br> access publications'"
          [caption]="'<strong>Data source:</strong> Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022'">
        </app-highcharts-category-map>
      </div>
      <div style="height: 600px">
        <app-highcharts-category-map
          [mapData]="questionsDataArray[1]" [subtitle]="" [toolTipData]="toolTipData[1]"
          [title]="'National Monitoring on Data Management'" [backgroundColor]="'#ffffff'"
          [customLabelText]="'<strong>'+participatingCountries[1] + ' out of '+ total[1] + '</strong><br> countries have a <br>national monitoring on <br>open access <br>publications'"
          [caption]="'<strong>Data source:</strong> Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022'">
        </app-highcharts-category-map>
      </div>
    </div>

  </div>
</div>

<div class="uk-section uk-section-small uk-margin-top" #exportContent3>
  <div class="uk-container uk-container-expand">
    <h5>Trend of Policies on Data Management among Research Performing and Research Funding Organisations</h5>

    <div class="uk-grid uk-margin-medium-top">
      <div class="uk-width-2-3 uk-child-width-1-2 uk-grid" style="height: 450px">
        <app-stacked-column [categories]="stackedColumnCategories" [series]="stackedColumnSeries1" [yAxis]="yAxisTitle"
                            [plotFormat]="plotFormat" [pointFormat]="tooltipPointFormat" [stackLabels]="false"
                            [yAxisLabelsFormat]="labelFormat" [xAxis]="xAxisTitle" [yAxisMax]="100">
        </app-stacked-column>
        <app-stacked-column [categories]="stackedColumnCategories" [series]="stackedColumnSeries2" [yAxis]="yAxisTitle"
                            [plotFormat]="plotFormat" [pointFormat]="tooltipPointFormat" [stackLabels]="false"
                            [yAxisLabelsFormat]="labelFormat" [xAxis]="xAxisTitle" [yAxisMax]="100">
        </app-stacked-column>
      </div>
      <div class="uk-width-1-3">
        <h6>Understanding the data</h6>
        <p>This graph presents the trends in data management policy adoption among Research Performing Organisations (RPOs) and Research Funding Organisations (RFOs) over a span of two years. It highlights the percentages of organizations that have formal data management policies in place versus those that do not, showcasing shifts in policy engagement across consecutive years. The graph differentiates between RPOs and RFOs with distinct colors, clearly indicating the varying levels of commitment to structured data management practices.</p>
        <p><strong>Data Source: </strong> Survey on National Contributions to EOSC and Open Science, OpenAIRE Graph.</p>

      </div>
    </div>
  </div>
</div>
