<div id="page_content">
  <div id="page_content_header" class="uk-blur-background" style="margin-top: 0"></div>
  <div id="page_content_actions" class="uk-section-primary uk-preserve-color" uk-sticky>
    <div class="uk-container uk-container-large">
      <sidebar-mobile-toggle class="uk-hidden@m uk-margin-top uk-display-block uk-margin-bottom"></sidebar-mobile-toggle>
    </div>
  </div>
  <div id="page_content_inner" class="">
    <div class="uk-section uk-section-primary uk-preserve-color uk-section-small" #exportContent>
      <div class="uk-container">

        <!--    <ul class="uk-breadcrumb">-->
        <!--      <li><a [routerLink]="['/explore/open-science-by-area']">Open Science by Area</a></li>-->
        <!--      <li><span aria-current="page">Repositories</span></li>-->
        <!--    </ul>-->

        <div class="uk-flex uk-flex-between uk-flex-middle uk-visible@m">
          <h4>Open Science by Area / Repositories</h4>
          <div class="uk-flex uk-flex-center"
               (click)="exportToPDF([exportContent, exportContent1, exportContent2, exportContent3, exportContent4, exportContent5], 'Repositories')"
               style="cursor: pointer">
            <div class="uk-flex uk-flex-middle uk-text-primary" style="background-color: #DAEEF3; border-radius: 30px; padding: 5px 7px">
              <span class="" style="background-color: #fff; border-radius: 50px; border: 1px solid #008691; padding: 4px 10px">
                Export report
              </span>
              <span *ngIf="exportActive else elseBlock" class="uk-margin-small-left" uk-spinner="ratio: 0.7"></span>
              <ng-template #elseBlock>
                <span class="material-symbols-outlined filled uk-margin-small-left uk-text-primary">download</span>
              </ng-template>
            </div>
          </div>
        </div>

        <div class="uk-hidden@m">
          <h4>Open Science by Area / Repositories</h4>
          <div class="uk-flex uk-flex-right"
               (click)="exportToPDF([exportContent, exportContent1, exportContent2, exportContent3, exportContent4, exportContent5], 'Repositories')"
               style="cursor: pointer">
            <div class="uk-flex uk-flex-middle uk-text-primary" style="background-color: #DAEEF3; border-radius: 30px; padding: 5px 7px">
              <span class="" style="background-color: #fff; border-radius: 50px; border: 1px solid #008691; padding: 4px 10px">
                Export report
              </span>
              <span *ngIf="exportActive else elseBlock" class="uk-margin-small-left" uk-spinner="ratio: 0.7"></span>
              <ng-template #elseBlock>
                <span class="material-symbols-outlined filled uk-margin-small-left uk-text-primary">download</span>
              </ng-template>
            </div>
          </div>
        </div>

        <!--    <h5>Repositories</h5>-->
        <p class="uk-text-lead uk-text-justify">Repositories are essential for the uptake and advancement of Open
          Science, providing secure platforms for storing, sharing, and preserving research outputs in line with FAIR
          principles. They promote transparency, reproducibility, and collaboration while supporting long-term knowledge
          preservation. By connecting national and regional research systems, repositories play a key role in advancing
          Open Science and contributing to the EOSC. This page provides an overview of the state of repositories in
          Europe based on the data from the Survey on National Contributions to EOSC and Open Science.</p>

      </div>
    </div>

    <div class="uk-section uk-section-primary uk-preserve-color uk-section-small" #exportContent1>
      <div class="uk-container">
        <h5>General Overview of Repositories in Europe for 2022</h5>

        <div class="uk-child-width-1-3@m uk-child-width-1-3@l uk-child-width-1-1@s uk-grid-match uk-grid-row-medium uk-flex-center" uk-grid>

          <div *ngIf="repositories.length === 2">
            <div class="uk-card card-simple uk-card-small uk-card-body">
              <div>
                <p>Repositories offered long-term preservation in EU Countries</p>
              </div>
              <div class="number big uk-margin-medium-top">
                <span class="uk-text-bold">{{ repositories[1] }} repositories</span>
              </div>
              <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                <ng-container *ngIf="repositories[1] >= repositories[0]; else repositoriesDown">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined up-arrow-color">arrow_upward</span>
                    <span class="percentage-up-color">{{ calculatePercentageChange(repositories) }}%</span>&nbsp; from
                    last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50"
                         width="99">
                  </div>
                </ng-container>
                <ng-template #repositoriesDown>
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                    <span class="percentage-down-color">{{ calculatePercentageChange(repositories) }}%</span>&nbsp; from
                    last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50"
                         width="99">
                  </div>
                </ng-template>
              </div>
            </div>
          </div>

          <div *ngIf="countriesWithPolicy.length === 2">
            <div class="uk-card card-simple uk-card-small uk-card-body">
              <div>
                <p>EU Countries with Policy on Connecting repositories to EOSC</p>
              </div>
              <div class="number big uk-margin-medium-top">
                <span class="uk-text-bold">{{ countriesWithPolicy[1] }}%</span>
              </div>
              <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                <ng-container *ngIf="countriesWithPolicy[1] >= countriesWithPolicy[0]; else policyDown">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined up-arrow-color">arrow_upward</span>
                    <span class="percentage-up-color">{{ Math.abs(countriesWithPolicy[0] - countriesWithPolicy[1]) }}
                      %</span>&nbsp; from last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50"
                         width="99">
                  </div>
                </ng-container>
                <ng-template #policyDown>
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                    <span class="percentage-down-color">{{ Math.abs(countriesWithPolicy[0] - countriesWithPolicy[1]) }}
                      %</span>&nbsp; from last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50"
                         width="99">
                  </div>
                </ng-template>
              </div>
            </div>
          </div>

          <div *ngIf="totalInvestments.length === 2">
            <div class="uk-card card-simple uk-card-small uk-card-body">
              <div>
                <p>Financial investments in connecting repositories to EOSC</p>
              </div>
              <div class="number big uk-margin-medium-top">
                <span class="uk-text-bold">{{ totalInvestments[1] }} mil Euro</span>
              </div>
              <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                <ng-container *ngIf="totalInvestments[1] >= totalInvestments[0]; else policyDown">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined up-arrow-color">arrow_upward</span>
                    <span class="percentage-up-color">{{ calculatePercentageChange(totalInvestments) }}%</span>&nbsp;
                    from last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50"
                         width="99">
                  </div>
                </ng-container>
                <ng-template #policyDown>
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                    <span class="percentage-down-color">{{ calculatePercentageChange(totalInvestments) }}%</span>&nbsp;
                    from last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50"
                         width="99">
                  </div>
                </ng-template>
              </div>
            </div>
          </div>

          <div *ngIf="countriesWithStrategy.length === 2">
            <div class="uk-card card-simple uk-card-small uk-card-body">
              <div>
                <p>EU Countries with Financial Strategy on connecting repositories to EOSC</p>
              </div>
              <div class="number big uk-margin-medium-top">
                <span class="uk-text-bold">{{ countriesWithStrategy[1] }}%</span>
              </div>
              <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                <ng-container *ngIf="countriesWithStrategy[1] >= countriesWithStrategy[0]; else policyDown">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined up-arrow-color">arrow_upward</span>
                    <span
                      class="percentage-up-color">{{ Math.abs(countriesWithStrategy[0] - countriesWithStrategy[1]) }}
                      %</span>&nbsp; from last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50"
                         width="99">
                  </div>
                </ng-container>
                <ng-template #policyDown>
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                    <span
                      class="percentage-down-color">{{ Math.abs(countriesWithStrategy[0] - countriesWithStrategy[1]) }}
                      %</span>&nbsp; from last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50"
                         width="99">
                  </div>
                </ng-template>
              </div>
            </div>
          </div>

          <div *ngIf="countriesWithMonitoring.length === 2">
            <div class="uk-card card-simple uk-card-small uk-card-body">
              <div>
                <p>EU Countries with Monitoring Initiatives on connecting repositories to EOSC</p>
              </div>
              <div class="number big uk-margin-medium-top">
                <span class="uk-text-bold">{{ countriesWithMonitoring[1] }}%</span>
              </div>
              <div class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                <ng-container *ngIf="countriesWithMonitoring[1] >= countriesWithMonitoring[0]; else policyDown">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined up-arrow-color">arrow_upward</span>
                    <span
                      class="percentage-up-color">{{ Math.abs(countriesWithMonitoring[0] - countriesWithMonitoring[1]) }}
                      %</span>&nbsp; from last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_green.svg" alt="Upward trend line" height="50"
                         width="99">
                  </div>
                </ng-container>
                <ng-template #policyDown>
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined down-arrow-color">arrow_downward</span>
                    <span
                      class="percentage-down-color">{{ Math.abs(countriesWithMonitoring[0] - countriesWithMonitoring[1]) }}
                      %</span>&nbsp; from last year
                  </div>
                  <div>
                    <img ngSrc="../assets/images/explore/trend_red.svg" alt="Downward trend line" height="50"
                         width="99">
                  </div>
                </ng-template>
              </div>
            </div>
          </div>

        </div>

        <div class="uk-margin-top">
          <span class="uk-text-bold">Data source:</span>&nbsp; Survey on National Contributions to EOSC and Open Science
          2023 - showing data for 2022.
        </div>

      </div>
    </div>

    <div class="uk-section uk-section-primary uk-preserve-color uk-section-small" #exportContent2>
      <div class="uk-container">

        <div class="uk-card uk-card-default visualisation-card uk-card-body">

          <ul class="uk-subnav uk-subnav-pill" uk-switcher="{connect:'#maps', animation: 'fade'}">
            <li><a class="uk-margin-remove-bottom" (click)="countryName = comment = undefined">Policies</a></li>
            <li><a class="uk-margin-remove-bottom" (click)="countryName = comment = undefined">Monitoring</a></li>
          </ul>

          <ul id="maps" class="uk-switcher uk-child-width-1-1 uk-grid-match" uk-grid>
            <li>
              <div uk-grid>
                <div class="uk-width-2-3@m uk-width-2-3@l uk-width-1-1@s">
                  <app-highcharts-category-map
                    [mapData]="questionsDataArray[0]" [height]="700"
                    [title]="'National Policy on Connecting Repositories to EOSC'" [backgroundColor]="'#ffffff'"
                    [customLabelText]="'<strong>'+participatingCountries[0] + ' out of '+ total[0] + '</strong><br> countries have a <br>national policy on <br>connecting repositories <br>to EOSC'"
                    [caption]=" policesMapCaptions[6] + '<strong>Data source:</strong> Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022.'"
                    (mapClick)="showComment(0, $event)">
                  </app-highcharts-category-map>
                </div>
                <div class="uk-width-1-3@m uk-width-1-3@l uk-width-1-1@s">
                  <div>
                    <h6>Start Exploring</h6>
                    <p>Click on a country to see what the survey reveals. Each one has its own story.</p>
                    <!--                <h6>Click on country for additional information</h6>-->
                    <div class="uk-flex uk-flex-middle uk-margin-medium-top">
                      <img *ngIf="countryCode" src="survey-tool/assets/images/flags/{{countryCode}}-flag-round.png"
                           width="30">
                      <span *ngIf="countryName" class="uk-margin-small-left">{{ countryName }}</span>
                    </div>
                    <p *ngIf="comment; else noComment" [innerHTML]="comment"
                       class="uk-text-justify uk-text-small overflow-wrap-break-word"></p>
                    <ng-template #noComment>--</ng-template>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <div uk-grid>
                <div class="uk-width-2-3@m uk-width-2-3@l uk-width-1-1@s">
                  <app-highcharts-category-map
                    [mapData]="questionsDataArray[1]" [height]="700"
                    [title]="'National Monitoring on Connecting Repositories to EOSC'" [backgroundColor]="'#ffffff'"
                    [customLabelText]="'<strong>'+participatingCountries[1] + ' out of '+ total[1] + '</strong><br> countries have a <br>national monitoring on <br>connecting repositories <br>to EOSC '"
                    [caption]="monitoringMapCaptions[6] + '<strong>Data source:</strong> Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022.'"
                    (mapClick)="showComment(1, $event)">
                  </app-highcharts-category-map>
                </div>
                <div class="uk-width-1-3@m uk-width-1-3@l uk-width-1-1@s">
                  <div>
                    <h6>Start Exploring</h6>
                    <p>Click on a country to see what the survey reveals. Each one has its own story.</p>
                    <!--                <h6>Click on country for additional information</h6>-->
                    <div class="uk-flex uk-flex-middle uk-margin-medium-top">
                      <img *ngIf="countryCode" src="survey-tool/assets/images/flags/{{countryCode}}-flag-round.png"
                           width="30">
                      <span *ngIf="countryName" class="uk-margin-small-left">{{ countryName }}</span>
                    </div>
                    <p *ngIf="comment; else noComment" [innerHTML]="comment"
                       class="uk-text-justify uk-text-small overflow-wrap-break-word"></p>
                    <ng-template #noComment>--</ng-template>
                  </div>
                </div>
              </div>
            </li>
          </ul>

        </div>

      </div>
    </div>


    <div class="uk-section uk-section-primary uk-preserve-color uk-section-small" #exportContent3>
      <div class="uk-container">

        <div class="uk-card uk-card-default visualisation-card uk-card-body">

          <ul class="uk-subnav uk-subnav-pill" uk-switcher="{connect:'#investments', animation: 'fade'}">
            <li><a class="uk-margin-remove-bottom">Overview</a></li>
            <li><a class="uk-margin-remove-bottom">Details</a></li>
          </ul>

          <ul id="investments" class="uk-switcher">
            <li>
              <div class="">
                <app-multi-chart [series]="bar[0]" [categories]="['Number of countries per Investment Category']"
                                 [titles]="barChartTitles" [reversedStacks]="false"
                                 [stacking]="'normal'" [pointWidth]="75" [legendOptions]="legendOptions"
                                 [customTooltip]="true" [yAxisLabels]="false" style="height: 100%"
                                 [caption]="'<p class=\'uk-text-justify\'>The graph illustrates the financial investments in connecting repositories to EOSC made by European countries. The investments are categorized in ranges to show the distribution and scale of funding.</p>' +
                                 '<p><strong>Data source: </strong>Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022.</p>'">
                </app-multi-chart>
              </div>
            </li>
            <li>
              <div class="">
                <app-tree-graph [data]="treeGraph[0]" style="height: 100%" [height]="700"
                                [title]="'Financial Investments in Connecting Repositories to EOSC in 2022'"
                                [caption]="'<p class=\'uk-text-justify\'>The graph illustrates the financial investments in connecting repositories to EOSC made by European countries. The investments are categorized in ranges to show the distribution and scale of funding.</p>' +
                            '<p><strong>Data source: </strong>Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022.</p>'">
                </app-tree-graph>
              </div>
            </li>
          </ul>

        </div>

      </div>
    </div>


    <div class="uk-section uk-section-primary uk-preserve-color uk-section-small" #exportContent4>
      <div class="uk-container">

        <div class="uk-card uk-card-default visualisation-card uk-card-body">

          <ul class="uk-subnav uk-subnav-pill" uk-switcher="{connect:'#maps2', animation: 'fade'}">
            <li><a class="uk-margin-remove-bottom" (click)="countryName = comment = undefined">Policies</a></li>
            <li><a class="uk-margin-remove-bottom" (click)="countryName = comment = undefined">Monitoring</a></li>
          </ul>

          <ul id="maps2" class="uk-switcher uk-child-width-1-1 uk-grid-match" uk-grid>
            <li>
              <div uk-grid>
                <div class="uk-width-2-3">
                  <app-highcharts-category-map
                    [mapData]="questionsDataArray[2]" [height]="700"
                    [title]="'National Policy on Long-term Data Preservation'" [backgroundColor]="'#ffffff'"
                    [customLabelText]="'<strong>'+participatingCountries[2] + ' out of '+ total[2] + '</strong><br> countries have a <br>national policy on <br>Long-term <br>Data Preservation'"
                    [caption]="'<p class=\'uk-text-justify\'>This map illustrates the status of national policies on OA publications across European countries. OA policies are essential for promoting the free sharing of scientific knowledge and ensuring research outputs are widely accessible.</p>' +
                '<p class=\'uk-text-justify\'>The map uses color-coding to indicate whether countries have mandatory OA policies, non-mandatory OA policies, no OA policies, or if data on their policy status is unavailable.</p>'+
                '<strong>Data source:</strong> Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022.'"
                    (mapClick)="showComment(2, $event)">
                  </app-highcharts-category-map>
                </div>
                <div class="uk-width-1-3">
                  <div>
                    <h6>Start Exploring</h6>
                    <p>Click on a country to see what the survey reveals. Each one has its own story.</p>
                    <!--                <h6>Click on country for additional information</h6>-->
                    <div class="uk-flex uk-flex-middle uk-margin-medium-top">
                      <img *ngIf="countryCode" src="survey-tool/assets/images/flags/{{countryCode}}-flag-round.png"
                           width="30">
                      <span *ngIf="countryName" class="uk-margin-small-left">{{ countryName }}</span>
                    </div>
                    <p *ngIf="comment; else noComment" [innerHTML]="comment"
                       class="uk-text-justify uk-text-small overflow-wrap-break-word"></p>
                    <ng-template #noComment>--</ng-template>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <div uk-grid>
                <div class="uk-width-2-3">
                  <app-highcharts-category-map
                    [mapData]="questionsDataArray[3]" [height]="700"
                    [title]="'National Monitoring on Long-term Data Preservation'" [backgroundColor]="'#ffffff'"
                    [customLabelText]="'<strong>'+participatingCountries[3] + ' out of '+ total[3] + '</strong><br> countries have a <br>national monitoring <br>on Long-term <br>Data Preservation'"
                    [caption]="'<p class=\'uk-text-justify\'>This map illustrates the status of national monitoring on OA publications across European countries.OA monitoring is essential for tracking progress, evaluating policy implementation, and ensuring that research outputs are freely accessible.</p>' +
                '<p class=\'uk-text-justify\'>The map uses color-coding to indicate whether countries have established mandatory OA monitoring, non-mandatory OA monitoring, no monitoring practices, or if data on their monitoring status is unavailable.</p>' +
                '<strong>Data source:</strong> Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022.'"
                    (mapClick)="showComment(3, $event)">
                  </app-highcharts-category-map>
                </div>
                <div class="uk-width-1-3">
                  <div>
                    <h6>Start Exploring</h6>
                    <p>Click on a country to see what the survey reveals. Each one has its own story.</p>
                    <!--                <h6>Click on country for additional information</h6>-->
                    <div class="uk-flex uk-flex-middle uk-margin-medium-top">
                      <img *ngIf="countryCode" src="survey-tool/assets/images/flags/{{countryCode}}-flag-round.png"
                           width="30">
                      <span *ngIf="countryName" class="uk-margin-small-left">{{ countryName }}</span>
                    </div>
                    <p *ngIf="comment; else noComment" [innerHTML]="comment"
                       class="uk-text-justify uk-text-small overflow-wrap-break-word"></p>
                    <ng-template #noComment>--</ng-template>
                  </div>
                </div>
              </div>
            </li>
          </ul>

        </div>

      </div>
    </div>


    <div class="uk-section uk-section-primary uk-preserve-color uk-section-small" #exportContent5>
      <div class="uk-container">

        <div class="uk-card uk-card-default visualisation-card uk-card-body">

          <ul class="uk-subnav uk-subnav-pill" uk-switcher="{connect:'#investments2', animation: 'fade'}">
            <li><a class="uk-margin-remove-bottom">Overview</a></li>
            <li><a class="uk-margin-remove-bottom">Details</a></li>
          </ul>

          <ul id="investments2" class="uk-switcher">
            <li>
              <div class="">
                <app-multi-chart [series]="bar[1]" [categories]="['Number of countries per Investment Category']"
                                 [titles]="barChartTitles2"
                                 [stacking]="'normal'" [pointWidth]="75" [legendOptions]="legendOptions"
                                 [customTooltip]="true" [yAxisLabels]="false" style="height: 100%"
                                 [caption]="'<p class=\'uk-text-justify\'>The graph illustrates the financial investments in Long-term Data Preservation made by European countries. The investments are categorized in ranges to show the distribution and scale of funding.</p>' +
                                 '<p><strong>Data source: </strong>Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022.</p>'">
                </app-multi-chart>
              </div>
            </li>
            <li>
              <div class="">
                <app-tree-graph [data]="treeGraph[1]" style="height: 100%" [height]="700"
                                [title]="'Financial Investments in Long-term Data Preservation in 2022'"
                                [caption]="'<p class=\'uk-text-justify\'>The graph illustrates the financial investments in Long-term Data Preservation made by European countries. The investments are categorized in ranges to show the distribution and scale of funding.</p>' +
                            '<p><strong>Data source: </strong>Survey on National Contributions to EOSC and Open Science 2023 - showing data for 2022.</p>'">

                </app-tree-graph>
              </div>
            </li>
          </ul>

        </div>

      </div>
    </div>
  </div>
  <div id="page_content_footer"></div>
</div>
