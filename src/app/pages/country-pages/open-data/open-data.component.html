<div class="uk-section uk-section-small">
  <div class="uk-container">

    <div class="uk-flex uk-flex-middle uk-margin-bottom">
      <img ngSrc="../../survey-tool/assets/images/flags/{{countryCode | lowercase}}-flag-round.png"
           class="flag-image" width="42" height="42" alt="rounded flag image">
      
      <div class="uk-margin-small-left">
        <h3 class="uk-margin-remove-bottom">Open Data in {{countryName}}</h3>
      </div>
    </div>
    <p>The European Union defines Open Data as the information collected, produced, or paid for by public bodies which is made freely available for anyone to reuse for any purpose. This data is typically provided under an open license and in a convenient, modifiable form that is machine-readable. Open Data policies in the EU are aimed at increasing transparency, fostering innovation, and enhancing public access to valuable information, thereby promoting economic growth and social welfare(source: <a>Publications Office of the EU)</a>. The graphic below offers a comprehensive overview of key metrics that monitor the advancement of Open Data initiatives in selected country.</p>
    <div class="uk-flex uk-flex-between uk-flex-middle">
      <h4>General Overview of Open Data in {{countryName}} for 2023</h4>
    </div>

    <div class="uk-grid-small" uk-grid>

      <div class="uk-width-3-5">
        <div class="uk-card uk-card-default uk-card-body external-sources visualisation-card">
          <div class="uk-child-width-1-2 uk-grid-small" uk-grid>

            <!-- Card 1 -->
            <div *ngIf="OpenDataPercentage[1] !== null" class="uk-animation-scale-up">
              <div class="uk-card card-simple uk-card-small uk-card-body">
                <p>Percentage of <span class="uk-text-bold">Open Data in {{countryName}}</span> (OA vs Closed)</p>
                <div class="number big uk-margin-medium-top">
                  <span class="uk-text-bold">{{ OpenDataPercentage[1] }}%</span>
                </div>
                <div *ngIf="OpenDataPercentageDiff !== null" class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined" [ngClass]="OpenDataPercentageDiff >= 0 ? 'up-arrow-color' : 'down-arrow-color'">
                      {{ OpenDataPercentageDiff >= 0 ? 'arrow_upward' : 'arrow_downward' }}
                    </span>
                    <span [ngClass]="OpenDataPercentageDiff >= 0 ? 'percentage-up-color' : 'percentage-down-color'">
                      {{ Math.abs(OpenDataPercentageDiff) }}%
                    </span>&nbsp; vs last year
                  </div>
                  <div>
                    <img [ngSrc]="'../assets/images/explore/' + (OpenDataPercentageDiff >= 0 ? 'trend_green' : 'trend_red') + '.svg'"
                         alt="trend image" height="50" width="99">
                  </div>
                </div>
              </div>
            </div>

            <!-- Card 2 -->
            <div *ngIf="rfoOpenDataPercentage[1] !== null" class="uk-animation-scale-up">
              <div class="uk-card card-simple uk-card-small uk-card-body">
                <p>Percentage of <span class="uk-text-bold">RFO's Policy on Open Data</span></p>
                <div class="number big uk-margin-medium-top">
                  <span class="uk-text-bold">{{ rfoOpenDataPercentage[1] }}%</span>
                </div>
                <div *ngIf="rfoOpenDataPercentageDiff !== null" class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined" [ngClass]="rfoOpenDataPercentageDiff >= 0 ? 'up-arrow-color' : 'down-arrow-color'">
                      {{ rfoOpenDataPercentageDiff >= 0 ? 'arrow_upward' : 'arrow_downward' }}
                    </span>
                    <span [ngClass]="rfoOpenDataPercentageDiff >= 0 ? 'up-arrow-color' : 'down-arrow-color'">
                      {{ Math.abs(rfoOpenDataPercentageDiff) }}%
                    </span>&nbsp; vs last year
                  </div>
                  <div>
                    <img [ngSrc]="'../assets/images/explore/' + (rfoOpenDataPercentageDiff >= 0 ? 'trend_green' : 'trend_red') + '.svg'"
                         alt="trend image" height="50" width="99">
                  </div>
                </div>
              </div>
            </div>

            <!-- Card 3 -->
            <div *ngIf="ODfinancialInvestment[1] !== null && ODfinancialInvestment[1] !== undefined" class="uk-animation-scale-up">
              <div class="uk-card card-simple uk-card-small uk-card-body">
                <p>Total amount of <span class="uk-text-bold">financial investments</span> in Open Data</p>
                <div class="number big uk-margin-medium-top">
                  <span class="uk-text-bold">
                    {{ ODfinancialInvestment[1]  + ' mil Euro' }}
                  </span>
                </div>
                <div *ngIf="ODfinancialInvestmentPercentageDiff !== null" class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined" [ngClass]="ODfinancialInvestmentPercentageDiff >= 0 ? 'up-arrow-color' : 'down-arrow-color'">
                      {{ ODfinancialInvestmentPercentageDiff >= 0 ? 'arrow_upward' : 'arrow_downward' }}
                    </span>
                    <span [ngClass]="ODfinancialInvestmentPercentageDiff >= 0 ? 'up-arrow-color' : 'down-arrow-color'">
                      {{ Math.abs(ODfinancialInvestmentPercentageDiff) }}%
                    </span>&nbsp; vs last year
                  </div>
                  <div>
                    <img [ngSrc]="'../assets/images/explore/' + (ODfinancialInvestmentPercentageDiff >= 0 ? 'trend_green' : 'trend_red') + '.svg'"
                         alt="trend image" height="50" width="99">
                  </div>
                </div>
              </div>
            </div>

            <!-- Card 4 -->
            <div *ngIf="rpoOpenDataPercentage[1] !== null" class="uk-animation-scale-up">
              <div class="uk-card card-simple uk-card-small uk-card-body">
                <p>Percentage of <span class="uk-text-bold">RPO's Policy on OA Publication</span></p>
                <div class="number big uk-margin-medium-top">
                  <span class="uk-text-bold">{{ rpoOpenDataPercentage[1] }}%</span>
                </div>
                <div *ngIf="rpoOpenDataPercentageDiff !== null" class="uk-flex uk-flex-bottom uk-flex-between uk-width-1-1">
                  <div class="uk-flex uk-flex-middle">
                    <span class="material-symbols-outlined" [ngClass]="rpoOpenDataPercentageDiff >= 0 ? 'up-arrow-color' : 'down-arrow-color'">
                      {{ rpoOpenDataPercentageDiff >= 0 ? 'arrow_upward' : 'arrow_downward' }}
                    </span>
                    <span [ngClass]="rpoOpenDataPercentageDiff >= 0 ? 'up-arrow-color' : 'down-arrow-color'">
                      {{ Math.abs(rpoOpenDataPercentageDiff) }}%
                    </span>&nbsp; vs last year
                  </div>
                  <div>
                    <img [ngSrc]="'../assets/images/explore/' + (rpoOpenDataPercentageDiff >= 0 ? 'trend_green' : 'trend_red') + '.svg'"
                         alt="trend image" height="50" width="99">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Card (2/5) -->
      <div class="uk-width-2-5 uk-animation-fade">
        <div class="uk-card uk-card-default uk-card-body noads visualisation-card">
          <div class="uk-margin-top">
            <h5 class="uk-flex uk-flex-between uk-margin-remove">
              National Policy on Open Data
              <span class="material-symbols-outlined" [ngClass]="hasNationalPolicyOD === 'Yes' ? 'up-arrow-color' : 'down-arrow-color'">
                {{ hasNationalPolicyOD === 'Yes' ? 'check' : 'close' }}
              </span>
            </h5>
            <p *ngIf="policyMandatoryOD === 'Yes'" class="uk-text-primary uk-text-bolder uk-margin-remove-top">Mandatory policy</p>
            <read-more-text *ngIf="nationalPolicyClarificationOD !== null" [maxHeight]="68" [text]="nationalPolicyClarificationOD"></read-more-text>
          </div>
          <div class="uk-margin-top">
            <h5 class="uk-flex uk-flex-between">
              Financial Strategy on Open Data
              <span class="material-symbols-outlined" [ngClass]="hasFinancialStrategyOD === 'Yes' ? 'up-arrow-color' : 'down-arrow-color'">
                {{ hasFinancialStrategyOD === 'Yes' ? 'check' : 'close' }}
              </span>
            </h5>
            <read-more-text *ngIf="financialStrategyClarificationOD" [maxHeight]="65" [text]="financialStrategyClarificationOD"></read-more-text>
          </div>
          <div class="uk-margin-top">
            <h5 class="uk-flex uk-flex-between">
              Monitoring on Open Data
              <span class="material-symbols-outlined" [ngClass]="hasMonitoringOD === 'Yes' ? 'up-arrow-color' : 'down-arrow-color'">
                {{ hasMonitoringOD === 'Yes' ? 'check' : 'close' }}
              </span>
            </h5>
            <read-more-text *ngIf="monitoringClarificationOD" [maxHeight]="65" [text]="monitoringClarificationOD"></read-more-text>
          </div>
        </div>
      </div>
    </div>
     <div>	
      <div class="uk-margin-top uk-flex uk-flex-center">
       <span class="uk-text-bold ">Data source:</span>&nbsp; Survey on National Contributions to EOSC and Open Science OpenAIRE Graph.
      </div>
      
    
      <div *ngIf="countrySurveyAnswer" class="uk-margin-medium-top uk-animation-fade">
       <div class="uk-card uk-card-body uk-card-default uk-width-1-1 noads visualisation-card">
        <h5>Learn more about Open Data Landscape in {{ countryName }}</h5>
         <content-collapse [maxHeight]="300">
          <div id="national_data_service">
            <div class="uk-text-secondary">National Data Service</div>
              <ng-container *ngIf="countrySurveyAnswer['OPEN SCIENCE DIGITAL INFRASTRUCTURE']['Question15']?.['Question15-1']; else data_service">
               <div
               [innerHTML]="countrySurveyAnswer['OPEN SCIENCE DIGITAL INFRASTRUCTURE']['Question15']['Question15-1']">
              </div>
              </ng-container>
            <ng-template #data_service><p>N/A</p></ng-template>
          </div>
        </content-collapse>
       </div>
     </div>


  </div>
</div>

