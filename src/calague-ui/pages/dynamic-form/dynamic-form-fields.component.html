<ng-container *ngIf="form" [formGroup]="form">

  <div *ngIf="fieldData.field.form.visible">
    <div class="uk-margin-large-bottom">
      <label class="uk-form-label uk-text-right"
             [attr.for]="fieldData.field.name">{{fieldData.field.label + (fieldData.field.form.mandatory ? ' (*)' : '')}}</label>
      <div class="uk-form-description uk-margin-top uk-width-9-10">{{fieldData.field.form.description}}</div>
      <div class="uk-form-controls uk-margin-medium-top">

        <div *ngIf="fieldData.field.typeInfo.type === 'composite'">
          <app-composite-field [fieldData]="fieldData" [subVocabularies]="subVocabularies" [vocabularies]="vocabularies"
                               (handleBitSets)="handleBitsetOfChildren($event)"
                               (handleBitSetsOfComposite)="handleCompositeBitsetOfChildren($event)">
          </app-composite-field>
        </div>

        <div *ngIf="fieldData.field.typeInfo.type === 'string' || fieldData.field.typeInfo.type === 'url' ||
                    fieldData.field.typeInfo.type === 'email' || fieldData.field.typeInfo.type === 'phone' ||
                    fieldData.field.typeInfo.type === 'double'">
          <app-string-url-email-field [fieldData]="fieldData"
                                      (handleBitSets)="handleBitsetOfChildren($event)"
                                      (handleBitSetsOfComposite)="handleCompositeBitsetOfChildren($event)">
          </app-string-url-email-field>
        </div>

        <div *ngIf="fieldData.field.typeInfo.type === 'vocabulary'">
          <app-vocabulary-field [fieldData]="fieldData" [subVocabularies]="subVocabularies" [vocabularies]="vocabularies"
                                (handleBitSets)="handleBitsetOfChildren($event)"
                                (handleBitSetsOfComposite)="handleCompositeBitsetOfChildren($event)">
          </app-vocabulary-field>
        </div>

        <div *ngIf="fieldData.field.typeInfo.type === 'largeText'">
          <div *ngIf="fieldData.field.typeInfo.multiplicity; else noMultiplicity;" [formArrayName]="fieldData.field.name">
            <!--To add multiplicity if needed-->
          </div>
          <ng-template #noMultiplicity>
            <textarea [formControlName]="fieldData.field.name" [id]="fieldData.field.name" class="uk-textarea uk-width-9-10"
                   [placeholder]="fieldData.field.form.placeholder ? fieldData.field.form.placeholder : ''"
                   (input)="updateBitSet(fieldData); unsavedChangesPrompt()"
                   [ngClass]="{'uk-form-danger': checkFormValidity(fieldData.field.name, this.editMode) }">
            </textarea>
            <div><i><small>{{fieldData.field.form.suggestion}}</small></i></div>
          </ng-template>
        </div>

        <div *ngIf="fieldData.field.typeInfo.type === 'richText'">
          <div *ngIf="fieldData.field.typeInfo.multiplicity; else noMultiplicity" [formArrayName]="fieldData.field.name">
            <!--To add multiplicity if needed-->
          </div>

          <ng-template #noMultiplicity>
            <div class="uk-margin-medium-top uk-width-9-10">
            <md-editor [id]="fieldData.field.name"
                       [ngClass]="{'uk-form-danger': checkFormValidity(fieldData.field.name, this.editMode)}"
                       [height]="'250px'"
                       [mode]="'editor'"
                       [options]="{markedjsOpt: { breaks: true }, showPreviewPanel: true, resizable: true, enablePreviewContentClick: true}"
                       (ngModelChange)="updateBitSet(fieldData)"
                       [formControlName]="fieldData.field.name">
            </md-editor>
            </div>
            <div><i><small>{{fieldData.field.form.suggestion}}</small></i></div>
          </ng-template>
        </div>

        <div *ngIf="fieldData.field.typeInfo.type === 'date'">
          <div *ngIf="fieldData.field.typeInfo.multiplicity; else noMultiplicity" [formArrayName]="fieldData.field.name">
            <!--To add multiplicity if needed-->
          </div>

          <ng-template #noMultiplicity>
            <input [formControlName]="fieldData.field.name" [id]="fieldData.field.name" class="uk-input uk-width-9-10"
                   [placeholder]="fieldData.field.form.placeholder ? fieldData.field.form.placeholder : ''"
                   (input)="updateBitSet(fieldData); unsavedChangesPrompt()" [type]="fieldData.field.typeInfo.type"
                   [ngClass]="{'uk-form-danger': checkFormValidity(fieldData.field.name, this.editMode) }">
            <div><i><small>{{fieldData.field.form.suggestion}}</small></i></div>
          </ng-template>
        </div>

        <div *ngIf="fieldData.field.typeInfo.type === 'boolean'">
          <div *ngIf="fieldData.field.typeInfo.multiplicity; else noMultiplicity;" [formArrayName]="fieldData.field.name">
            <!--To add multiplicity if needed-->
          </div>
          <ng-template #noMultiplicity>
            <label>
              <input class="uk-radio" type="radio" [formControlName]="fieldData.field.name" [value]="true"
                     (input)="updateBitSet(fieldData); unsavedChangesPrompt()" [name]="fieldData.field.name"
                     [ngClass]="{'uk-form-danger': checkFormValidity(fieldData.field.name, this.editMode) }"/>&nbsp;Yes&nbsp;
            </label>
            <label>
              <input class="uk-radio" type="radio"  [formControlName]="fieldData.field.name" [value]="false"
                     (input)="updateBitSet(fieldData); unsavedChangesPrompt()" [name]="fieldData.field.name"
                     [ngClass]="{'uk-form-danger': checkFormValidity(fieldData.field.name, this.editMode) }"/>&nbsp;No&nbsp;
            </label>
          </ng-template>
        </div>

      </div>
    </div>
  </div>

</ng-container>
